<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br><br>
	<div id="text"></div>
	<script>
		//监听button对象
		document.getElementById('button').addEventListener('click',loadText);

		//实现loadText方法
		function loadText(){
			//Asynchronouse JavaScript And XML发起异步请求 点赞之后会在界面看到
			//axios Fetch API prototype NODE API jQuery数据请求
			//XMLHttpRequest http(客户端->服务器)Ajax tcp(数据流 服务器->客户端)
			//xml数据格式~html 更容易解析 json(05年之后出现) 不请求xml 请求json
			//1.实例化xhr对象
			var xhr=new XMLHttpRequest();
			console.log(xhr.readyState); //0

			console.log(xhr);
			//2.配置对象信息 type url/file asyn(是否采用异步)
			//同步 轮着来对于一个东西 一行代码执行完才能轮到下一行代码
			//异步 多核 同时
			//false 都完成 同步
			//true 异步
			xhr.open("GET","sample.txt",true);
			console.log(xhr.readyState); //1

			// //3.执行处理数据的方法  (最后执行这个 在请求数据之后)(1)
			// xhr.onload=function(){
			//     console.log(xhr.readyState); //4
			//     if(this.status==200){
			// 	console.log(this.responseText);
			//     }
			// }
			xhr.onprogress=function(){
				console.log("加载页面"+this.readyState);
			}  //状态一直为3
            //(2)
			xhr.onreadystatechange=function(){
			    console.log(xhr.readyState);  //2(见下 请求接收 未处理)3(请求处理中)4(完全处理完)
			    if(this.readyState==4&&this.status==200){
				  // console.log(this.responseText);
				  document.getElementById("text").innerHTML=this.responseText;
			    }
			}
			//4.发送请求
			xhr.send();

			// console.log(123);
            // 0: 请求未初始化
			// 1: 服务器连接已建立
			// 2: 请求已接收open
			// 3: 请求处理中 //加载动画 用户引导
			// 4: 请求已完成，且响应已就绪

			//200:ok
			//404:页面未找到

		}
	</script>
</body>
</html>